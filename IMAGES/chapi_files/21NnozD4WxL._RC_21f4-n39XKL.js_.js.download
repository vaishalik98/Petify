(function(d){var e=window.AmazonUIPageJS||window.P,g=e._namespace||e.attributeErrors,a=g?g("DetailPageMobileIconFarmAssets@common","DetailPageMobileIconFarm"):e;a.guardFatal?a.guardFatal(d)(a,window):a.execute(function(){d(a,window)})})(function(d,e,g){d.when("A").register("get-icon-farm-page-state",function(a){return{parseJSON:function(c){var b;try{b=a.$("#"+c).find('script[data-a-state\x3d"{"key":"iconfarm-state"}"]').html()}catch(f){console.log(f.message)}b?c=a.$.parseJSON(b):(a.state.parse(),
c=a.state("iconfarm-state"));return c}}});d.declare("iconfarm-metrics-constants",{ICON_FARM_FEATURE_DIV:"iconFarm_feature_div",ICON_FARM_PAGE_STATE_HOLDER_DIV:"iconfarm-pagestate-holder",METRIC_TYPE:{GLANCE_VIEW:"GLANCE_VIEW",ICON_CLICK:"ICON_CLICK",SECONDARY_PAGE_OPEN:"SECONDARY_PAGE_OPEN",SECONDARY_PAGE_CLOSE:"SECONDARY_PAGE_CLOSE",FULL_RETURN_POLICY:"FULL_RETURN_POLICY",PAGE_DATA_MISSING:"PAGE_DATA_MISSING",ABSENT:"ABSENT"},REF_MARKER_PREFIX:{ICON_FARM_WIDGET:"iconfarm_wid",AMAZON_DELIVERED:"iconfarm_ad",
RETURNS_POLICY:"iconfarm_rp",PAY_ON_DELIVERY:"iconfarm_pod",WARRANTY:"iconfarm_wr",EASY_CARE:"iconfarm_ec",AMAZON_PROTECT:"iconfarm_ap",NO_CONTACT_DELIVERY:"iconfarm_ncd",GENERIC_RETURN_POLICY:"iconfarm_grp",MULTIPLE_SPECIFIC_RETURN_POLICY:"iconfarm_msrp",SINGLE_SPECIFIC_RETURN_POLICY:"iconfarm_ssrp",PAY_ON_DELIVERY_ACTIVE:"iconfarm_pod_active",PAY_ON_DELIVERY_INACTIVE:"iconfarm_pod_inactive",WARRANTY_EU:"iconfarm_wr_eu",AMAZON_MANAGED_DELIVERY:"iconfarm_amd",AMAZON_DELIVERED_MENA:"iconfarm_ad_mena",
SAFE_PAYMENTS:"iconfarm_sp",STATIC_RETURNS_POLICY:"iconfarm_srp",GENERIC_RETURNS_POLICY:"iconfarm_grp",SUPPORT_POLICY:"iconfarm_supp"},REF_MARKER_SUFFIX:{GLANCE_VIEW:"_gv",ICON_CLICK:"_clk",SECONDARY_PAGE_OPEN:"_sp_op",SECONDARY_PAGE_CLOSE:"_sp_cl",FULL_RETURN_POLICY:"_frp",ABSENT:"_noavail"}});d.when("A","iconfarm-return-policy-metric-logger","iconfarm-default-metric-logger").register("iconfarm-icon-metric-factory",function(a,c,b){return{getIconMetric:function(f){switch(f){case "RETURNS_POLICY":return c;
default:return b}}}});d.when("A","iconfarm-metricService","iconfarm-metrics-constants","get-icon-farm-page-state","iconfarm-icon-metric-factory").register("iconfarm-metricLogger",function(a,c,b,f,d){return{log:function(c,h,e){if(c&&h&&b.REF_MARKER_PREFIX[c]&&b.REF_MARKER_SUFFIX[h]){var k=f.parseJSON(b.ICON_FARM_PAGE_STATE_HOLDER_DIV);k&&d.getIconMetric(c).log(c,h,a.$.extend(!0,{asin:k.asin,merchantId:k.merchantId},e))}}}});d.when("A","iconfarm-metric-cache").register("iconfarm-metricService",function(a,
c){return{log:function(b){if(c.add(b)){var f="/ref\x3d"+b.ref,f=f+("?pageAsin\x3d"+b.asin),f=f+("\x26pageType\x3d"+(a.capabilities?a.capabilities.mobile?a.capabilities.isAmazonApp?"DetailWebView":"DetailAW":"Detail":"")),f=f+"\x26subPageType\x3dIconFarm"+("\x26merchantId\x3d"+b.merchantId);a.get("/gp/product/ajax/dpx-metrics-handler.html"+f)}}}});d.register("iconfarm-postmetric",function(){return{postCountMetric:function(a){if("undefined"!==typeof a){var c=e.ue;if(c){var b=c.count(a)||0;c.count(a,
b+1)}}},postTimeMetric:function(a,c){if("undefined"!==typeof a&&"undefined"!==typeof c){var b=e.ue;b&&b.count(a,c)}}}});d.when("A").register("iconfarm-metric-cache",function(a){var c=[],b=function(b){if(!(b&&b.asin&&b.merchantId&&b.ref))return!1;var d=!1;a.each(c,function(a,c){a.asin===b.asin&&a.merchantId===b.merchantId&&a.ref===b.ref&&(d=!0)});return d};return{isPresent:b,add:function(a){return a&&a.asin&&a.merchantId&&a.ref?b(a)?!1:(c.push(a),!0):!1},reset:function(){c=[]}}});d.when("A","iconfarm-metricService",
"iconfarm-metrics-constants","iconfarm-postmetric").register("iconfarm-default-metric-logger",function(a,c,b,d){return{log:function(e,l,h){c.log(a.$.extend(!0,h,{ref:b.REF_MARKER_PREFIX[e]+b.REF_MARKER_SUFFIX[l]}));d.postCountMetric(b.REF_MARKER_PREFIX[e]+b.REF_MARKER_SUFFIX[l])}}});d.when("A","iconfarm-metricService","iconfarm-metrics-constants","iconfarm-postmetric","get-icon-farm-page-state").register("iconfarm-return-policy-metric-logger",function(a,c,b,d,e){var l=function(){var a=e.parseJSON(b.ICON_FARM_PAGE_STATE_HOLDER_DIV);
if(a&&a.RETURNS_POLICY&&a.RETURNS_POLICY.secondaryViewData&&a.RETURNS_POLICY.secondaryViewData.glLevelReturnPolicies)switch(a.RETURNS_POLICY.secondaryViewData.glLevelReturnPolicies.length){case 0:return"GENERIC_RETURN_POLICY";case 1:return"SINGLE_SPECIFIC_RETURN_POLICY";default:return"MULTIPLE_SPECIFIC_RETURN_POLICY"}};return{log:function(e,g,k){e=l()||e;c.log(a.$.extend(!0,k,{ref:b.REF_MARKER_PREFIX[e]+b.REF_MARKER_SUFFIX[g]}));d.postCountMetric(b.REF_MARKER_PREFIX[e]+b.REF_MARKER_SUFFIX[g])}}})});
/* ******** */
(function(f){var g=window.AmazonUIPageJS||window.P,h=g._namespace||g.attributeErrors,a=h?h("DetailPageMobileIconFarmAssets@desktop","DetailPageMobileIconFarm"):g;a.guardFatal?a.guardFatal(f)(a,window):a.execute(function(){f(a,window)})})(function(f,g,h){f.when("A","a-popover","icon-farm-constants","iconfarm-metricLogger","iconfarm-metrics-constants").register("icon-farm-desktop-popover",function(a,n,e,b,c){var d=function(d){var e=d.data("name");a.off("a:popover:beforeShow:"+e);a.on("a:popover:beforeShow:"+
e,function(a){b.log(e,c.METRIC_TYPE.ICON_CLICK);b.log(e,c.METRIC_TYPE.SECONDARY_PAGE_OPEN)});a.off("a:popover:beforeHide:"+e);a.on("a:popover:beforeHide:"+e,function(a){b.log(e,c.METRIC_TYPE.SECONDARY_PAGE_CLOSE)})};return{init:function(){for(var b=a.$(e.ICON_FARM_CONTAINER_CLASS),c=0;c<b.length;c++){var k=a.$(b[c]),f=k.data(e.TYPE_PARAM);if(f&&f===e.TYPE_PARAM_VALUE_CUSTOM_POP_OVER){var f=k,m=a.$("#"+f.data(e.POPOVER_CONTENT_PARAM)),m={activate:e.POPOVER_ACTIVATION,position:e.POPOVER_POSITION,width:e.POPOVER_WIDTH,
inlineContent:m.html(),name:f.data("name")};n.create(f,m);d(k)}}}}});f.when("A","get-icon-farm-page-state","icon-farm-constants","iconfarm-metricLogger","iconfarm-metrics-constants","ready").register("icon-farm-desktop-returns-policy",function(a,f,e,b,c){a.declarative("returns-policy-url","click",function(a){b.log("RETURNS_POLICY",c.METRIC_TYPE.FULL_RETURN_POLICY);a=f.parseJSON(e.ICON_FARM_PAGE_STATE_HOLDER_DIV);g.open(a.RETURNS_POLICY.secondaryViewData.genericReturnPolicyURL,"_blank")});a.off("a:popover:beforeShow:return-policy-secondary-view");
a.on("a:popover:beforeShow:return-policy-secondary-view",function(a){b.log("RETURNS_POLICY",c.METRIC_TYPE.ICON_CLICK);b.log("RETURNS_POLICY",c.METRIC_TYPE.SECONDARY_PAGE_OPEN)});a.off("a:popover:beforeHide:return-policy-secondary-view");a.on("a:popover:beforeHide:return-policy-secondary-view",function(a){b.log("RETURNS_POLICY",c.METRIC_TYPE.SECONDARY_PAGE_CLOSE)});return{init:function(){var d=f.parseJSON(e.ICON_FARM_PAGE_STATE_HOLDER_DIV),b=a.$(e.ICON_FARM_SECONDARY_VIEW_HOLDER_ID);if(d&&d.RETURNS_POLICY&&
d.RETURNS_POLICY.secondaryViewData&&d.RETURNS_POLICY.secondaryViewData.glLevelReturn)if(d&&!d.returnPolicyContent){var c={responseType:"html"};c.data=JSON.stringify(d.RETURNS_POLICY.secondaryViewData);c.data&&a.ajax("/gp/product/features/icon-farm/iconFarm-sv-loader.html",{method:"POST",params:c,success:function(c){c&&b&&b.length&&(d.returnPolicyContent=c,a.state(e.ICON_FARM_STATE,d),b.html(c),d.RETURNS_POLICY.secondaryViewData.fullReturnPolicyURL&&a.$(".full-return-policy").attr("href",d.RETURNS_POLICY.secondaryViewData.fullReturnPolicyURL))}})}else d&&
d.returnPolicyContent&&b&&b.length&&(b.html(d.returnPolicyContent),d.RETURNS_POLICY.secondaryViewData.fullReturnPolicyURL&&a.$(".full-return-policy").attr("href",d.RETURNS_POLICY.secondaryViewData.fullReturnPolicyURL))}}});f.when("A","IconFarmPageStateParserService","icon-farm-desktop-popover","icon-farm-desktop-returns-policy","iconfarm-metricLogger","icon-farm-constants","iconfarm-metrics-constants","iconfarm-metric-cache","atf").execute(function(a,f,e,b,c,d,l,g){function k(){g.reset();a.loadImageManually(a.$(".icon-box"));
e.init();b.init();h()}var h=function(){var b=a.$("#icon-farm-widget");b&&b.length?c.log("ICON_FARM_WIDGET",l.METRIC_TYPE.GLANCE_VIEW):c.log("ICON_FARM_WIDGET",l.METRIC_TYPE.ABSENT);(b=a.$(".icon-container"))&&b.length&&b.each(function(){c.log(a.$(this).data("name"),l.METRIC_TYPE.GLANCE_VIEW)})};k();a.on("a:pageUpdate",function(){var b;a:{try{if(a.$("#"+d.ICON_FARM_V2_FEATURE_DIV).find("script").length){b=d.ICON_FARM_V2_FEATURE_DIV;break a}if(a.$("#"+d.ICON_FARM_V2_PRIMARY_FEATURE_DIV).find("script").length){b=
d.ICON_FARM_V2_PRIMARY_FEATURE_DIV;break a}c.log("ICON_FARM_WIDGET",l.PAGE_DATA_MISSING)}catch(e){c.log("ICON_FARM_WIDGET",l.PAGE_DATA_MISSING)}b=void 0}b&&f.isNewState(b,d.ICON_FARM_STATE)&&(b=f.processState(b,d.ICON_FARM_STATE),a.objectIsEmpty(b)||k())})});f.declare("icon-farm-constants",{ICON_FARM_FEATURE_DIV:"iconFarm_feature_div",ICON_FARM_V2_FEATURE_DIV:"iconfarmv2_feature_div",ICON_FARM_V2_PRIMARY_FEATURE_DIV:"iconFarmV2InsidePrimary_feature_div",ICON_FARM_PAGE_STATE_HOLDER_DIV:"iconfarm-pagestate-holder",
ICON_FARM_CONTAINER_CLASS:".icon-container",ICON_FARM_SECONDARY_VIEW_HOLDER_ID:"#icon-farm-secondary-view-holder",ICON_FARM_STATE:"iconfarm-state",POPOVER_ACTIVATION:"onclick",POPOVER_POSITION:"triggerBottom",POPOVER_WIDTH:"533",POPOVER_CONTENT_PARAM:"iconContent",TYPE_PARAM:"type",TYPE_PARAM_VALUE:"bottom-sheet",TYPE_PARAM_VALUE_CUSTOM_POP_OVER:"custom-pop-over"});(function(){f.when("A","atf").register("IconFarmPageStateParserService",function(a){function f(e,b){b='script[data-a-state\x3d"'+JSON.stringify({key:b})+
'"]';return a.$("#"+e).find(b)}return{processState:function(e,b){var c;try{var d=f(e,b),g=d[0];c=d.html();var h=a.parseJSON(c);a.state(b,h);a.$.data(g,"state_processed",!0);return h}catch(k){console.log(k)}return a.state(b)},isNewState:function(e,b){try{return!a.$.data(f(e,b)[0],"state_processed")}catch(c){console.warn("Unable to determine state status",c)}return!1}}})})()});
/* ******** */
